<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ ‚Äî {{ nickname }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

<div class="max-w-4xl mx-auto py-10 px-4">
    <h1 class="text-3xl font-bold text-center mb-2">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞</h1>
    <h2 class="text-lg text-center text-gray-600 mb-6">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong>{{ nickname }}</strong></h2>

    <!-- –û–±—â–∏–π –≤—ã–≤–æ–¥ –∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ -->
    <div class="bg-white rounded-lg shadow p-6 mb-6 text-center">
        <p class="text-xl font-semibold mb-4">üìù <span class="text-blue-600">–û–±—â–∏–π –≤—ã–≤–æ–¥:</span> {{ overall }}</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-lg">
            <div>üß† <strong>–°—É–∏—Ü–∏–¥–∞–ª—å–Ω–æ—Å—Ç—å:</strong> <span class="text-red-600">{{ levels.suicidal }}%</span></div>
            <div>üòü <strong>–¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å:</strong> <span class="text-yellow-600">{{ levels.anxiety }}%</span></div>
            <div>üòû <strong>–î–µ–ø—Ä–µ—Å—Å–∏—è:</strong> <span class="text-purple-600">{{ levels.depression }}%</span></div>
        </div>
    </div>

    <!-- –†–∏—Å—É–Ω–æ–∫ -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4">üñºÔ∏è –†–∏—Å—É–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
        <img src="{{ url_for('static', filename='user_results/' + user_image) }}" alt="–†–∏—Å—É–Ω–æ–∫" class="rounded mx-auto max-w-full">
    </div>

    <!-- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è -->
    <div class="bg-white rounded-lg shadow p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4">üîë –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</h3>
        <div class="space-y-3">
            {% for key in keys %}
                <p class="text-gray-800 leading-relaxed">‚Ä¢ {{ key }}</p>
            {% endfor %}
        </div>
    </div>

    <!-- –ü—Ä–∏–∑–Ω–∞–∫–∏ -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">üìê –í—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏</h3>
        <table class="w-full text-sm text-left border border-gray-300">
            <tbody>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫—Ä–∞—à–µ–Ω–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü—ã</td>
                    <td class="p-2">{{ features.outline_ratio }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ó–∞–∫—Ä–∞—à–µ–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–∏–≥—É—Ä—ã</td>
                    <td class="p-2">{{ (features.total_fill_ratio * 100) | round(1) }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ó–∞–∫—Ä–∞—à–µ–Ω–æ –≤–Ω–µ —Ñ–∏–≥—É—Ä—ã</td>
                    <td class="p-2">{{ (features.outside_ratio * 100) | round(1) }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–û–±–≤–æ–¥–∫–∞</td>
                    <td class="p-2">{{ '‚úÖ –ï—Å—Ç—å' if features.outline_detected else '‚ùå –ù–µ—Ç' }}</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–õ–µ–≤–∞—è —á–∞—Å—Ç—å</td>
                    <td class="p-2">{{ (features.left_ratio * 100) | round(1) }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å</td>
                    <td class="p-2">{{ (features.right_ratio * 100) | round(1) }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å</td>
                    <td class="p-2">{{ (features.fill_center * 100) | round(1) }}%</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ö–æ–ª-–≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤</td>
                    <td class="p-2">{{ features.num_fragments }}</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ú–µ–ª–∫–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤</td>
                    <td class="p-2">{{ features.small_fragments }}</td>
                </tr>
                <tr class="border-t">
                    <td class="p-2 font-medium">–ü–æ–ø–∞–≤—à–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã</td>
                    <td class="p-2">{{ features.matched_fragment_ids | join(", ") }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
